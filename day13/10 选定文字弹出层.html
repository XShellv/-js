<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style>
		#test,#another{
			width: 400px;
			margin: 50px;
		}
		#mask{
			position: absolute;
			display: none;
			left: 0;
			top: 0;
			width: 100px;
			height: 100px;
			background-color:pink;
		}
	</style>
</head>
<body>
	<div id="mask"></div>
	<div id="test">我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字</div>
	<div id="another">我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字</div>
</body>
</html>
<script>
	function $(id){return document.getElementById(id);}
	$("test").onmouseup = function(event){
		var event = event || window.event;
		var x = event.clientX;
		var y = event.clientY;
		var content = null;
		if(window.getSelection){
			var content = window.getSelection().toString();
		}
		else{
			var content = document.selection.createRange(); //IE写法
		}
		if(content){
			show(x,y,content);
		}
	}

	function show(x,y,content){
		setTimeout(function(){
			$("mask").style.display = "block";
			$("mask").style.left = x + "px";
			$("mask").style.top = y + "px";
			$("mask").innerHTML = content;
		},200)
		
	}

	document.onmousedown = function(event){
		var event = event || window.event;
		var targetId = event.target ? event.target.id : event.srcElement.id;
		if(targetId != "mask"){
			$("mask").style.display = "none";
		}
		
	}
</script>